"use client";
import Header from "@/app/components/header";
import Footer from "@/app/components/footer";
import styles from "@/app/page.module.css";
import { notFound } from "next/navigation";


import axios from "axios";
import { useParams } from 'next/navigation'
import { useEffect, useState } from "react";

type Post = {
    id?: number;
    title?: string;
    content?: string;
    url?: string;
    published?: boolean;
};
export default function BlogPage() {
    const params = useParams<{ slug: string }>();

    const [post, setPost] = useState<Post | null>(null);
    const [error, setError] = useState(null);

    useEffect(() => {
        axios.get(`${process.env.NEXT_PUBLIC_API_URL}posts/slug/${params.slug}`)
            .then(function (response) {
                console.log(response);
                if (response.status === 200) {
                    setPost(response.data);
                }
            })
            .catch(function (error) {
                setError(error.message);
            })
            .finally(function () {
                // setLoading(false);
            });
    }, [params.slug]);

    if (error) return notFound();


    return (
        (
            <div className={styles.container}>
                <Header className='short-header' />
                {
                    post &&
                    <main className={styles.main}>
                        <div className={`${styles.wrapper} ${styles['blog-post']}`}>

                            <div className={styles['blog-editor']}>
                                <div className={styles['blog-content']} dangerouslySetInnerHTML={{ __html: post?.content || '' }} />
                            </div>


                            <div className={styles.donate}>
                                P.S. –î—Ä—É–∑—ñ, —è —Ç–∞–∫–æ–∂ –¥—ñ–ª—é—Å—è –∫–æ—Ä–∏—Å–Ω–∏–º –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º —É —Å–≤–æ—î–º—É <a href="https://eidosdesign.substack.com">Substack</a>,
                                –¥–µ –≤–∏ –º–æ–∂–µ—Ç–µ –æ—Ñ–æ—Ä–º–∏—Ç–∏ –ø—ñ–¥–ø–∏—Å–∫—É –∑ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è–º –¥–æ—Å—Ç—É–ø—É –¥–æ –Ω–∞–≤—á–∞–ª—å–Ω–∏—Ö –º–∞—Ç–µ—Ä—ñ–∞–ª—ñ–≤ —Ç–∞ –º–µ–Ω—Ç–æ—Ä—Å—å–∫–∏—Ö –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ–π
                                –∑–∞ –∑–∞–ø–∏—Ç–æ–º. –í–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ –ø—ñ–¥—Ç—Ä–∏–º–∞—Ç–∏ ¬´–ï–π–¥–æ—Å¬ª —á–µ—Ä–µ–∑ <a href="buymeacoffee.com/vadimgrin">buymeacoffee</a>,
                                –∞–±–æ –ø–æ—à–∏—Ä–µ–Ω–Ω—è–º —Ü—ñ—î—ó —Å—Ç–∞—Ç—Ç—ñ.
                                <br />
                                –î—è–∫—É—é! ü§ó
                            </div>

                        </div>
                    </main>
                }
                <Footer />
            </div>
        )
    );
}


// export default async function BlogLayout({ params }) {
//     const { blogSlug } = await params;
//     const post = posts[blogSlug];

//     if (!post) return notFound();

// return (
//     <div className={styles.container}>
//         <Header className='short-header' />
//         <main className={styles.main}>
//             <div className={`${styles.wrapper} ${styles['blog-post']}`}>
//                 {/* <ul className={styles.breadcrumbs}>
//                     <li><Link href="/">Home</Link></li>
//                     <li>‚è≥ {post.title}</li>
//                 </ul> */}

//                 <ProductList data={post} />

//                 <div className={styles.donate}>
//                     P.S. –î—Ä—É–∑—ñ, —è —Ç–∞–∫–æ–∂ –¥—ñ–ª—é—Å—è –∫–æ—Ä–∏—Å–Ω–∏–º –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º —É —Å–≤–æ—î–º—É <a href="https://eidosdesign.substack.com">Substack</a>,
//                     –¥–µ –≤–∏ –º–æ–∂–µ—Ç–µ –æ—Ñ–æ—Ä–º–∏—Ç–∏ –ø—ñ–¥–ø–∏—Å–∫—É –∑ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è–º –¥–æ—Å—Ç—É–ø—É –¥–æ –Ω–∞–≤—á–∞–ª—å–Ω–∏—Ö –º–∞—Ç–µ—Ä—ñ–∞–ª—ñ–≤ —Ç–∞ –º–µ–Ω—Ç–æ—Ä—Å—å–∫–∏—Ö –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ–π
//                     –∑–∞ –∑–∞–ø–∏—Ç–æ–º. –í–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ –ø—ñ–¥—Ç—Ä–∏–º–∞—Ç–∏ ¬´–ï–π–¥–æ—Å¬ª —á–µ—Ä–µ–∑ <a href="buymeacoffee.com/vadimgrin">buymeacoffee</a>,
//                     –∞–±–æ –ø–æ—à–∏—Ä–µ–Ω–Ω—è–º —Ü—ñ—î—ó —Å—Ç–∞—Ç—Ç—ñ.
//                     <br />
//                     –î—è–∫—É—é! ü§ó
//                 </div>

//             </div>
//         </main>

//         <Footer />
//     </div>
// );
// }